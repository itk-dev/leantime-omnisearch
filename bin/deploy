#!/usr/bin/env bash
set -o errexit -o errtrace -o noclobber -o nounset -o pipefail

script_dir=$(cd $(dirname "${BASH_SOURCE[0]}") && pwd)
project_dir=$(cd $(dirname "$script_dir") && pwd)

cd $project_dir

plugin_repo_name=leantime-omnisearch
plugin_name=OmniSearch

rm -rf ${plugin_name}

git_tag=${1:-}
if [ -z "$git_tag" ]; then
    (>&2 echo "Usage: $0 git-tag")
    exit
fi


curl -OL  https://github.com/ITK-Leantime/{$plugin_repo_name}/releases/download/$git_tag/$plugin_name-$git_tag.tar.gz

tar xvf $plugin_name-$git_tag.tar.gz
rm -rf $plugin_name-$git_tag.tar.gz
